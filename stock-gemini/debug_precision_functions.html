<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>精度函数调试</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; padding: 16px; }
    .debug-info { background: #f6f8fa; padding: 12px; border-radius: 4px; margin-bottom: 16px; }
    .value { font-weight: bold; }
    pre { background: #f6f8fa; padding: 12px; border-radius: 4px; overflow-x: auto; }
  </style>
</head>
<body>
  <h1>精度函数调试</h1>
  <div id="results"></div>

  <script type="module">
    import { roundToDecimals, add, subtract, multiply, divide } from './js/precision.js';

    const results = document.getElementById('results');

    function debugPrecisionFunctions() {
      // 测试您的案例：(239 / 302) * 100
      const dividend = 239;
      const divisor = 302;

      // 正确计算
      const correctDivision = dividend / divisor;  // 0.7913907284768212
      const correctResult = correctDivision * 100; // 79.13907284768212

      // 使用现有精度函数计算
      const precisionDivision = divide(dividend, divisor);
      const precisionResult = multiply(precisionDivision, 100);

      const resultDiv = document.createElement('div');

      resultDiv.innerHTML = `
        <h2>精度函数调试：(239 / 302) * 100</h2>
        <div class="debug-info">
          <h3>正确计算结果</h3>
          <p>239 / 302 = <span class="value">${correctDivision}</span></p>
          <p>(239 / 302) * 100 = <span class="value">${correctResult}</span></p>
          <p>正确结果（保留2位小数）= <span class="value">${correctResult.toFixed(2)}</span></p>
        </div>

        <div class="debug-info">
          <h3>现有精度函数计算结果</h3>
          <p>divide(239, 302) = <span class="value">${precisionDivision}</span></p>
          <p>multiply(${precisionDivision}, 100) = <span class="value">${precisionResult}</span></p>
          <p>精度函数结果（保留2位小数）= <span class="value">${precisionResult.toFixed(2)}</span></p>
        </div>

        <div class="debug-info">
          <h3>问题分析</h3>
          <p>正确结果应该是: <span class="value">79.14</span></p>
          <p>当前结果是: <span class="value">${precisionResult.toFixed(2)}</span></p>
          <p>是否一致: <span class="value">${Math.abs(precisionResult.toFixed(2) - 79.14) < 0.01 ? '是' : '否'}</span></p>
        </div>
      `;

      results.appendChild(resultDiv);
    }

    // 执行调试
    debugPrecisionFunctions();
  </script>
</body>
</html>